---
author: "Serhii Polishchuk"
title: "1C 7.7 на Ubuntu 10.10"
date: 2011-01-10
tags: ["Ubuntu"]
draft: false
---
<!--more-->
Нашел время установить последнюю версию [**Ubuntu**](http://ru.wikipedia.org/wiki/Ubuntu), и т.к. было очень много хороших отзывов о доработанном [**Wine**](http://ru.wikipedia.org/wiki/Wine) (эмулятор программ для Windows) решился сразу одним махом установить **Linux** как основную и единственную систему. Установка еще более упростилась, возможно из-за того что я делал это уже не впервый раз :), все драйвера встали без проблем. Даже с **WiFi роутером D-Link DIR-615** не смотря на нарекания форумчан, моя Убунта подружилась без проблем. Так что после недолгого ожидания я получил полностью рабочую лошадку с совершенно свободной, а главное бесплатной, операционной системой. Но **с Wine и 1C** все оказалось не так просто...  После установки **Wine** из репозитория **Ubuntu** устанавливаем **1С.** Установка прошла без проблем, но вот запускаться **1С** отказалась. Если у Вас та же история... Качаем необходимые библиотеки [отсюда](http://www.microsoft.com/downloads/en/details.aspx?FamilyID=08b1ac1b-7a11-43e8-b59d-0867f9bdda66&displaylang=en) и сохраняем сюда: `/home/Имя_пользователя/.wine/dosdevices/c:` Открываем терминал (Приложения->Стандартные->Терминал) и прописываем следующую комманду: `wine c:\\DCOM98.EXE /C /T:c:\\temp /Q` Таким образом мы разархивировали библиотеки необходимые для работы в папку: `/home/Имя_пользователя/.wine/dosdevices/c:/temp` Из этой папки нам понадобятся 4 библиотеки: ole32.dll, olepro32.dll, oleaut32.dll, rpcrt4.dll. Копируем в паку: `/home/spolischook/.wine/dosdevices/c:/windows/system32` Соглашаемся с заменой файлов. Запускаем **конфигуратор Wine** Приложения->Wine->Настройка Wine, или через терминал: `winecfg` Начинаем настройку:

**ВАЖНО!** _exe файл **1С** находиться в папке c:/Program Files/1Cv77/BIN и может называться 1cv7.exe или 1cv7l.exe или 1cv7n.exe или 1cv7s.exe. В следующих примерах, когда я буду запускать 1С из командной строки, я буду использовать название 1cv7s.exe, т.к. в моем примере это именно так. Если у Вас другой файл, меняйте название на свое._

Через вкладку Приложения добавляем в список исполняемый (exe) файл **1С** (в папке Program Files). Выделяем добавленный файл и переходим на вкладку Библиотеки. Добавляем библиотеки и настройки к ним:

**ole32** — « _сторонняя_»;

**oleaut32**— « _сторонняя_»;

**olepro32** — « _сторонняя_»;

**rpcrt4** — « _сторонняя, встроенная_»;

У меня еще потребовало библиотеку **mfc42**. Ее взял из Windows XP (пока есть место в облаке можно скачать у меня, [жмите здесь](http://ubuntuone.com/p/XQy/)). Добавил по аналогии с предыдущими. Если все готово пробуем запустить через командную строку, так мы увидим ошибки если таковые будут: `wine "c:\\Program Files\\1cv77\\Bin\\1cv7s.exe"` Попробовали? Я натолкнулся на очередную ошибку, которая ругалась на ту самую **mfc42** библиотеку. Немного погуглив нашел решение. Для того чтобы установить нормальную библиотеку необходимо в терминале выполнить несколько команд: `wget http://www.kegel.com/wine/winetricks` и `sh winetricks mfc42` соглашаемся со всеми всплывающими окнами, через командную строку (можно просто кнопкой вверх найти последнюю команду) запускаем **1С**, и... О чудо! Она запустилась, даже без платного Wine от Езерсофт! ;) При первом запуске, **1С** выдаст ошибку "Порядок сортировки, установленный для базы данных, отличается от системного!". Для поправки состояния заходим в конфигуратор **1С**, Администрирование\->Кодовая страница таблиц ИБ выбираем "\+ текущая системная установка", далее идем в Окна\->Панель окон\->снимаем галочку с Показать \- из-за этого параметра **1С** будет постоянно вылетать. У меня случалось что после изменения настройки показа окон в конфигураторе, в 1С ничего не менялось, поэтому после обычного входа в 1С проделываем туже операцию.

**UPD:** Вообще практическими пробами было обнаружено что иногда необходимо снять галочку — Настройки Wine -> Графика -> Разрешать менеджеру окон управлять окнами Wine но делать это нужно только в том случае если уже ничего не помогает т.к. работать в таком режиме крайне не удобно.

**UPD2: Проблемы с русским вводом.** После всего проделанного возможно будет отсутствовать русский ввод. Решаем проблему следующим образом \- в Терминале:

```bash
sudo gedit /var/lib/locales/supported.d/ru
```

добавим в конец файла:

```
ru_RU.CP1251 CP1251
ru_UA.CP1251 CP1251
```

Сохраняем, закрываем. В Терминале:

```bash
sudo locale-gen
```

Создаем новый текстовый документ и ложим туда следующий код:

```
#!/bin/bash
LC_ALL=ru_RU.CP1251 wine "c:\\Program Files\\1cv77\\Bin\\1cv7s.exe"
```

Сохраняем в домашнем каталоге под именем 1C Далее Приложения -> Wine -> Программы -> 1С Предприятие -> кликаем правой кнопкой на значке с программой -> Добавить кнопку запуска на панель. После этого на панели быстрого запуска у нас появится кнопочка 1С-ки. Кликаем правой кнопочкой на ней -> Свойства -> Команда пишем следующее:

```
sh /home/[Имя_Пользователя]/1C
```

Не забудте заменить \[Имя\_Пользователя\] на свое. Жмем "Закрыть". Все готово.
